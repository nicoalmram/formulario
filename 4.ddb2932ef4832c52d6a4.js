(window.webpackJsonp=window.webpackJsonp||[]).push([[4],{zrcO:function(e,r,t){"use strict";t.r(r),t.d(r,"UsersModule",function(){return z});var i=t("3Pt+"),b=t("ofXK"),s=t("tyNb"),n=t("fXoL");let o=(()=>{class e{}return e.\u0275fac=function(r){return new(r||e)},e.\u0275cmp=n.Bb({type:e,selectors:[["ng-component"]],decls:3,vars:0,consts:[[1,"p-4"],[1,"container"]],template:function(e,r){1&e&&(n.Kb(0,"div",0),n.Kb(1,"div",1),n.Ib(2,"router-outlet"),n.Jb(),n.Jb())},directives:[s.g],encapsulation:2}),e})();var c=t("SxV6"),d=t("J9tS");function a(e,r){1&e&&n.Ib(0,"span",10)}function l(e,r){1&e&&(n.Kb(0,"span"),n.ec(1,"Borrar"),n.Jb())}function u(e,r){if(1&e){const e=n.Lb();n.Kb(0,"tr"),n.Kb(1,"td"),n.ec(2),n.Jb(),n.Kb(3,"td"),n.ec(4),n.Jb(),n.Kb(5,"td"),n.ec(6),n.Jb(),n.Kb(7,"td",6),n.Kb(8,"a",7),n.ec(9,"Editar"),n.Jb(),n.Kb(10,"button",8),n.Rb("click",function(){n.Zb(e);const t=r.$implicit;return n.Tb().deleteUser(t.id)}),n.dc(11,a,1,0,"span",9),n.dc(12,l,2,0,"span",5),n.Jb(),n.Jb(),n.Jb()}if(2&e){const e=r.$implicit;n.wb(2),n.gc("",e.title," ",e.firstName," ",e.lastName,""),n.wb(2),n.fc(e.email),n.wb(2),n.fc(e.role),n.wb(2),n.Vb("routerLink","edit/",e.id,""),n.wb(2),n.Ub("disabled",e.isDeleting),n.wb(1),n.Ub("ngIf",e.isDeleting),n.wb(1),n.Ub("ngIf",!e.isDeleting)}}function f(e,r){1&e&&(n.Kb(0,"tr"),n.Kb(1,"td",11),n.Ib(2,"span",12),n.Jb(),n.Jb())}let m=(()=>{class e{constructor(e){this.userService=e}ngOnInit(){this.userService.getAll().pipe(Object(c.a)()).subscribe(e=>this.users=e)}deleteUser(e){const r=this.users.find(r=>r.id===e);r&&(r.isDeleting=!0,this.userService.delete(e).pipe(Object(c.a)()).subscribe(()=>this.users=this.users.filter(r=>r.id!==e)))}}return e.\u0275fac=function(r){return new(r||e)(n.Hb(d.b))},e.\u0275cmp=n.Bb({type:e,selectors:[["ng-component"]],decls:17,vars:2,consts:[["routerLink","add",1,"btn","btn-sm","btn-success","mb-2"],[1,"table","table-striped"],[2,"width","30%"],[2,"width","10%"],[4,"ngFor","ngForOf"],[4,"ngIf"],[2,"white-space","nowrap"],[1,"btn","btn-sm","btn-primary","mr-1",3,"routerLink"],[1,"btn","btn-sm","btn-danger","btn-delete-user",3,"disabled","click"],["class","spinner-border spinner-border-sm",4,"ngIf"],[1,"spinner-border","spinner-border-sm"],["colspan","4",1,"text-center"],[1,"spinner-border","spinner-border-lg","align-center"]],template:function(e,r){1&e&&(n.Kb(0,"h1"),n.ec(1,"Usuarios"),n.Jb(),n.Kb(2,"a",0),n.ec(3,"A\xf1adir Usuario"),n.Jb(),n.Kb(4,"table",1),n.Kb(5,"thead"),n.Kb(6,"tr"),n.Kb(7,"th",2),n.ec(8,"Nombre"),n.Jb(),n.Kb(9,"th",2),n.ec(10,"Correo"),n.Jb(),n.Kb(11,"th",2),n.ec(12,"Rol"),n.Jb(),n.Ib(13,"th",3),n.Jb(),n.Jb(),n.Kb(14,"tbody"),n.dc(15,u,13,9,"tr",4),n.dc(16,f,3,0,"tr",5),n.Jb(),n.Jb()),2&e&&(n.wb(15),n.Ub("ngForOf",r.users),n.wb(1),n.Ub("ngIf",!r.users))},directives:[s.e,b.i,b.j],encapsulation:2}),e})();var p=t("XgRA");function v(e,r){1&e&&(n.Kb(0,"h1"),n.ec(1,"A\xf1adir Usuario"),n.Jb())}function g(e,r){1&e&&(n.Kb(0,"h1"),n.ec(1,"Editar Usuario"),n.Jb())}function h(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Seleccione un t\xedtulo"),n.Jb())}function J(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,h,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.title.errors.required)}}function K(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Introduzca el nombre"),n.Jb())}function w(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,K,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.firstName.errors.required)}}function U(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Introduzca el apellido"),n.Jb())}function I(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,U,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.lastName.errors.required)}}function C(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Introduzca el correo"),n.Jb())}function j(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Introduzca una direcci\xf3n de correo v\xe1lida"),n.Jb())}function N(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,C,2,0,"div",0),n.dc(2,j,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.email.errors.required),n.wb(1),n.Ub("ngIf",e.f.email.errors.email)}}function S(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Seleccione el rol"),n.Jb())}function M(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,S,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.role.errors.required)}}function A(e,r){1&e&&(n.Kb(0,"div"),n.Kb(1,"h3",26),n.ec(2,"Cambiar la contrase\xf1a"),n.Jb(),n.Kb(3,"p"),n.ec(4,"D\xe9jelo vac\xedo para mantener la misma contrase\xf1a"),n.Jb(),n.Jb())}function y(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Introduzca la contrase\xf1a"),n.Jb())}function q(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"La contrase\xf1a debe tener, al menos, 6 caracteres"),n.Jb())}function k(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,y,2,0,"div",0),n.dc(2,q,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.password.errors.required),n.wb(1),n.Ub("ngIf",e.f.password.errors.minlength)}}function O(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Se requiere confirmar la contrase\xf1a"),n.Jb())}function T(e,r){1&e&&(n.Kb(0,"div"),n.ec(1,"Las contrase\xf1as deben ser iguales"),n.Jb())}function L(e,r){if(1&e&&(n.Kb(0,"div",25),n.dc(1,O,2,0,"div",0),n.dc(2,T,2,0,"div",0),n.Jb()),2&e){const e=n.Tb();n.wb(1),n.Ub("ngIf",e.f.confirmPassword.errors.required),n.wb(1),n.Ub("ngIf",e.f.confirmPassword.errors.mustMatch)}}function X(e,r){1&e&&n.Ib(0,"span",27)}const P=function(e){return{"is-invalid":e}};let R=(()=>{class e{constructor(e,r,t,i,b){this.formBuilder=e,this.route=r,this.router=t,this.userService=i,this.alertService=b,this.loading=!1,this.submitted=!1}ngOnInit(){this.id=this.route.snapshot.params.id,this.isAddMode=!this.id;const e=[i.j.minLength(6)];this.isAddMode&&e.push(i.j.required);const r={validators:Object(p.b)("password","confirmPassword")};this.form=this.formBuilder.group({title:["",i.j.required],firstName:["",i.j.required],lastName:["",i.j.required],email:["",[i.j.required,i.j.email]],role:["",i.j.required],password:["",[i.j.minLength(6),this.isAddMode?i.j.required:i.j.nullValidator]],confirmPassword:["",this.isAddMode?i.j.required:i.j.nullValidator]},r),this.isAddMode||this.userService.getById(this.id).pipe(Object(c.a)()).subscribe(e=>this.form.patchValue(e))}get f(){return this.form.controls}onSubmit(){this.submitted=!0,this.alertService.clear(),this.form.invalid||(this.loading=!0,this.isAddMode?this.createUser():this.updateUser())}createUser(){this.userService.create(this.form.value).pipe(Object(c.a)()).subscribe(()=>{this.alertService.success("User added",{keepAfterRouteChange:!0}),this.router.navigate(["../"],{relativeTo:this.route})}).add(()=>this.loading=!1)}updateUser(){this.userService.update(this.id,this.form.value).pipe(Object(c.a)()).subscribe(()=>{this.alertService.success("User updated",{keepAfterRouteChange:!0}),this.router.navigate(["../../"],{relativeTo:this.route})}).add(()=>this.loading=!1)}}return e.\u0275fac=function(r){return new(r||e)(n.Hb(i.b),n.Hb(s.a),n.Hb(s.c),n.Hb(d.b),n.Hb(d.a))},e.\u0275cmp=n.Bb({type:e,selectors:[["ng-component"]],decls:70,vars:34,consts:[[4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-row"],[1,"form-group","col"],["formControlName","title",1,"form-control",3,"ngClass"],["value",""],["value","Mr"],["value","Mrs"],["value","Miss"],["value","Ms"],["class","invalid-feedback",4,"ngIf"],[1,"form-group","col-5"],["type","text","formControlName","firstName",1,"form-control",3,"ngClass"],["type","text","formControlName","lastName",1,"form-control",3,"ngClass"],[1,"form-group","col-7"],["type","text","formControlName","email",1,"form-control",3,"ngClass"],["formControlName","role",1,"form-control",3,"ngClass"],["value","User"],["value","Admin"],["type","password","formControlName","password",1,"form-control",3,"ngClass"],["type","password","formControlName","confirmPassword",1,"form-control",3,"ngClass"],[1,"form-group"],[1,"btn","btn-primary",3,"disabled"],["class","spinner-border spinner-border-sm mr-1",4,"ngIf"],["routerLink","/users",1,"btn","btn-link"],[1,"invalid-feedback"],[1,"pt-3"],[1,"spinner-border","spinner-border-sm","mr-1"]],template:function(e,r){1&e&&(n.dc(0,v,2,0,"h1",0),n.dc(1,g,2,0,"h1",0),n.Kb(2,"form",1),n.Rb("ngSubmit",function(){return r.onSubmit()}),n.Kb(3,"div",2),n.Kb(4,"div",3),n.Kb(5,"label"),n.ec(6,"T\xedtulo"),n.Jb(),n.Kb(7,"select",4),n.Ib(8,"option",5),n.Kb(9,"option",6),n.ec(10,"Mr"),n.Jb(),n.Kb(11,"option",7),n.ec(12,"Mrs"),n.Jb(),n.Kb(13,"option",8),n.ec(14,"Miss"),n.Jb(),n.Kb(15,"option",9),n.ec(16,"Ms"),n.Jb(),n.Kb(17,"option",6),n.ec(18,"Don"),n.Jb(),n.Kb(19,"option",7),n.ec(20,"Do\xf1a"),n.Jb(),n.Kb(21,"option",8),n.ec(22,"Se\xf1or"),n.Jb(),n.Kb(23,"option",9),n.ec(24,"Se\xf1ora"),n.Jb(),n.Jb(),n.dc(25,J,2,1,"div",10),n.Jb(),n.Kb(26,"div",11),n.Kb(27,"label"),n.ec(28,"Nombre"),n.Jb(),n.Ib(29,"input",12),n.dc(30,w,2,1,"div",10),n.Jb(),n.Kb(31,"div",11),n.Kb(32,"label"),n.ec(33,"Apellido"),n.Jb(),n.Ib(34,"input",13),n.dc(35,I,2,1,"div",10),n.Jb(),n.Jb(),n.Kb(36,"div",2),n.Kb(37,"div",14),n.Kb(38,"label"),n.ec(39,"Correo"),n.Jb(),n.Ib(40,"input",15),n.dc(41,N,3,2,"div",10),n.Jb(),n.Kb(42,"div",3),n.Kb(43,"label"),n.ec(44,"Rol"),n.Jb(),n.Kb(45,"select",16),n.Ib(46,"option",5),n.Kb(47,"option",17),n.ec(48,"Usuario"),n.Jb(),n.Kb(49,"option",18),n.ec(50,"Administrador"),n.Jb(),n.Jb(),n.dc(51,M,2,1,"div",10),n.Jb(),n.Jb(),n.dc(52,A,5,0,"div",0),n.Kb(53,"div",2),n.Kb(54,"div",3),n.Kb(55,"label"),n.ec(56,"Contrase\xf1a"),n.Jb(),n.Ib(57,"input",19),n.dc(58,k,3,2,"div",10),n.Jb(),n.Kb(59,"div",3),n.Kb(60,"label"),n.ec(61,"Repita la contrase\xf1a"),n.Jb(),n.Ib(62,"input",20),n.dc(63,L,3,2,"div",10),n.Jb(),n.Jb(),n.Kb(64,"div",21),n.Kb(65,"button",22),n.dc(66,X,1,0,"span",23),n.ec(67," Guardar "),n.Jb(),n.Kb(68,"a",24),n.ec(69,"Cancelar"),n.Jb(),n.Jb(),n.Jb()),2&e&&(n.Ub("ngIf",r.isAddMode),n.wb(1),n.Ub("ngIf",!r.isAddMode),n.wb(1),n.Ub("formGroup",r.form),n.wb(5),n.Ub("ngClass",n.Xb(20,P,r.submitted&&r.f.title.errors)),n.wb(18),n.Ub("ngIf",r.submitted&&r.f.title.errors),n.wb(4),n.Ub("ngClass",n.Xb(22,P,r.submitted&&r.f.firstName.errors)),n.wb(1),n.Ub("ngIf",r.submitted&&r.f.firstName.errors),n.wb(4),n.Ub("ngClass",n.Xb(24,P,r.submitted&&r.f.lastName.errors)),n.wb(1),n.Ub("ngIf",r.submitted&&r.f.lastName.errors),n.wb(5),n.Ub("ngClass",n.Xb(26,P,r.submitted&&r.f.email.errors)),n.wb(1),n.Ub("ngIf",r.submitted&&r.f.email.errors),n.wb(4),n.Ub("ngClass",n.Xb(28,P,r.submitted&&r.f.role.errors)),n.wb(6),n.Ub("ngIf",r.submitted&&r.f.role.errors),n.wb(1),n.Ub("ngIf",!r.isAddMode),n.wb(5),n.Ub("ngClass",n.Xb(30,P,r.submitted&&r.f.password.errors)),n.wb(1),n.Ub("ngIf",r.submitted&&r.f.password.errors),n.wb(4),n.Ub("ngClass",n.Xb(32,P,r.submitted&&r.f.confirmPassword.errors)),n.wb(1),n.Ub("ngIf",r.submitted&&r.f.confirmPassword.errors),n.wb(2),n.Ub("disabled",r.loading),n.wb(1),n.Ub("ngIf",r.loading))},directives:[b.j,i.l,i.f,i.d,i.i,i.e,i.c,b.h,i.g,i.k,i.a,s.e],encapsulation:2}),e})();const B=[{path:"",component:o,children:[{path:"",component:m},{path:"add",component:R},{path:"edit/:id",component:R}]}];let D=(()=>{class e{}return e.\u0275mod=n.Fb({type:e}),e.\u0275inj=n.Eb({factory:function(r){return new(r||e)},imports:[[s.f.forChild(B)],s.f]}),e})(),z=(()=>{class e{}return e.\u0275mod=n.Fb({type:e}),e.\u0275inj=n.Eb({factory:function(r){return new(r||e)},imports:[[b.b,i.h,D]]}),e})()}}]);